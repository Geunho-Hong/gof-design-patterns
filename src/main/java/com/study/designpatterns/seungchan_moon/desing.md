## 디자인 패턴

---

### 디자인 패턴이란?


wiki
> 디자인 패턴(Design pattern)은 건축학 및 컴퓨터 과학에서 사용되는 용어로, 설계 문제에 대한 해답을 문서화하기 위해 고안된 형식 방법이다. 이 방식은 건축가 크리스토퍼 알렉산더가 건축학 영역에서 고안한 것을 그 시초로 하며[1], 이후 컴퓨터 과학 등 여러 다른 분야에도 도입되었다.[2]

---

### 컴퓨터 과학에서의 디자인 패턴


wiki
> 소프트웨어 개발 방법에서 사용되는 디자인 패턴은 프로그램 개발에서 자주 나타나는 과제를 해결하기 위한 방법 중 하나로, 과거의 소프트웨어 개발 과정에서 발견된 설계의 노하우를 축적하여 이름을 붙여, 이후에 재이용하기 좋은 형태로 특정의 규약을 묶어서 정리한 것이다.

---

#### 장점


1. 이미 테스트를 마친 검증된 개발 방법을 사용해 개발 속도를 향상한다.
   1. 새 코드를 작성할 때 곧바로 알 수 없는 문제들이 있다.
   2. 아직 드러나지도 않았고 예측도 못한 문제들
   3. 증명된 패턴은 이런 문제에도 대비되어 있음
2. 공통 용어 정립을 통한 개발자들 간의 빠른 의사소통 촉진
   1. 어떻게 설계를 할지 장황하게 설명하거나 도표를 안그려도 됨.
   2. '어떤 패턴을 사용하면 돼' 라는 한 마디로 의사소통
   3. 단, 모든 개발자들이 그 패턴과 용어를 알고 있어야 함
---

#### 단점


1. 고치려는 대상이 잘못됨
    1. GoF 책의 패턴 중 과반수는 C++ 언어의 미지원 기능에 대한 해결책
2. 곧바로 적용할 수 없는 참고 가이드를 ‘패턴’이라 부르기 힘듬 (베스트 프랙티스 정도)
3. 잘못 적용하는 경우가 빈번함 (특히 학생 수준에서..)
    1. 오히려 프로그램의 복잡성을 높임
    2. ex) 사람에게 망치를 준다면 삐죽한 모든걸 망치로 박아야된다고 생각을 하게 됨 (못이 아닌 나사를 망치로 때려박음)
4. 비효율적인 해법이 되는 경우가 많음
    1. 디자인 패턴은 범용적, 추상적
    2. 코드 중복이 많아지고 성능이 떨어질 수 있음
5. 다른 추상화 기법과 크게 다르지 않음
    1. 이미 많은 프로그래밍 분야에 존재하던 현상에 왜 굳이 건축 용어를 사용하는지? (빌더, 팩토리)

---

### 언제 어떻게 사용해야 좋을까?


1. 클린 코드를 얻을 수 있을 때
2. 도메인 속 문제와 적절히 어우러질 때 
   1. 도메인 주도 설계 책 내용중 Composit 패턴과 Strategy 패턴은 고전적인 디자인 패턴을 다른 방식으로 생각함으로써 도메인 문제에 어떻게 적용 할수 있는지를 보여준다.

---

#### 싱글톤 패턴

인스턴스를 오직 한개만 제공하는 클래스이며 시스템 런타임, 환경 세팅에 대한 정보 등 인스턴스가 여러개 일 때 문제가 생길 수 있는 경우 사용한다.


- [가장 단순한 방법](./_1_singleton/Settings_1.java)
  - 멀티 스레드에 취약하다.
  - synchronized 블록을 통해 안전하게 만들 수 있다.
    - 스레드를 blocking 시키기 때문에 성능상 좋지 않다. 
- [이른 초기화(eager initialization)](./_1_singleton/Settings_2.java)
  - 객체가 사용하지 않아도 초기화 시키기 때문에 메모리상 좋지 않다.
- [double checked locking](./_1_singleton/Settings_3.java)
  - 메모리 비용과 성능상 이점을 높였지만 복잡하다.
- [느린 초기화(lazy initialization)](./_1_singleton/Settings_4.java)
  - 권장하는 방법 중 하나.